<ns0:test-suite xmlns:ns0="urn:model.allure.qatools.yandex.ru" start="1542790414756" stop="1542790416438">
  <name>test_cases</name>
  <labels/>
  <test-cases>
    <test-case start="1542790414756" status="failed" stop="1542790415528">
      <description>

        用例描述：根据用户手机号验证此手机号返回的相应租户是否正确
        </description>
      <name>.Users.motao.PycharmProjects.SqbjApiTest.test_cases.test_public_api.test_get_tenant.TestGetTenant.test_get_tenant[16811011101-\u946b\u6cf0\u4ea7\u4e1a]</name>
      <failure>
        <message>AssertionError: assert '鑫泰产业' in '{"jsonrpc": "2.0", "id": 1, "result": [{"tenantId": "772cbb220daaa39a148db3cdcfbdadac", "shortName": "\\u946b\\u6cf0\...9e64a76fbd98eb439b7", "shortName": "motest"}, {"tenantId": "f40ccb4caad440170ea378adc184d775", "shortName": "jingj"}]}'</message>
        <stack-trace>self = &lt;test_cases.test_public_api.test_get_tenant.TestGetTenant object at 0x1069282e8&gt;
username = 16811011101, shortname = '鑫泰产业'

    @pytest.mark.parametrize("username, shortname", [
        (16811011101, "鑫泰产业"),
        (16811011101, "motest"),
        (16811011101, "jingj")
    
    ])
    @allure.story("验证获取用户租户接口")     # story定义用户场景
    @allure.feature('test_get_tenant')
    def test_get_tenant(self, username, shortname):
        '''
    
            用例描述：根据用户手机号验证此手机号返回的相应租户是否正确
            '''
        with allure.step("设置用户登录手机号"):  # 将一个测试用例分成几个步骤，将步骤打印到测试报告中
            url = "https://smart.uat2.sqbj.com/api/basic/json-rpc/views"
            data = {"id": 1,
                    "jsonrpc": "2.0",
                    "method": "common_getTenantByUsername",
                    "params": [username]}
        with allure.step("获取用户租户信息"):
            r = requests.post(url=url, json=data, verify=False)
            r_code = r.status_code
            r_json = json.dumps(r.json())
            r_time = r.elapsed.microseconds/1000
            #res = r_json['result']
            print(r_json)
        with allure.step("验证结果"):
            assert r_code == 200
&gt;           assert shortname in r_json
E           assert '鑫泰产业' in '{"jsonrpc": "2.0", "id": 1, "result": [{"tenantId": "772cbb220daaa39a148db3cdcfbdadac", "shortName": "\\u946b\\u6cf0\...9e64a76fbd98eb439b7", "shortName": "motest"}, {"tenantId": "f40ccb4caad440170ea378adc184d775", "shortName": "jingj"}]}'

test_cases/test_public_api/test_get_tenant.py:46: AssertionError</stack-trace>
      </failure>
      <attachments>
        <attachment source="d254ed5c-7173-4044-8271-82eef65c05c5-attachment.txt" title="Captured log setup" type="text/plain"/>
        <attachment source="f67595ea-ece7-4a1b-977b-4e0c0837cf99-attachment.txt" title="Captured log call" type="text/plain"/>
      </attachments>
      <labels>
        <label name="story" value="验证获取用户租户接口"/>
        <label name="feature" value="test_get_tenant"/>
        <label name="feature" value="TestGetTenant"/>
        <label name="severity" value="normal"/>
        <label name="thread" value="20436-MainThread"/>
        <label name="host" value="localhost"/>
        <label name="framework" value="pytest"/>
        <label name="language" value="cpython3"/>
      </labels>
      <steps>
        <step start="1542790414764" status="passed" stop="1542790414764">
          <name>设置用户登录手机号</name>
          <title>设置用户登录手机号</title>
          <attachments/>
          <steps/>
        </step>
        <step start="1542790414764" status="passed" stop="1542790415319">
          <name>获取用户租户信息</name>
          <title>获取用户租户信息</title>
          <attachments/>
          <steps/>
        </step>
        <step start="1542790415319" status="failed" stop="1542790415319">
          <name>验证结果</name>
          <title>验证结果</title>
          <attachments/>
          <steps/>
        </step>
      </steps>
    </test-case>
    <test-case start="1542790415535" status="passed" stop="1542790416052">
      <description>

        用例描述：根据用户手机号验证此手机号返回的相应租户是否正确
        </description>
      <name>.Users.motao.PycharmProjects.SqbjApiTest.test_cases.test_public_api.test_get_tenant.TestGetTenant.test_get_tenant[16811011101-motest]</name>
      <attachments>
        <attachment source="c1c2097d-f8a8-436d-bd24-4c467f1bccd3-attachment.txt" title="Captured log setup" type="text/plain"/>
      </attachments>
      <labels>
        <label name="story" value="验证获取用户租户接口"/>
        <label name="feature" value="test_get_tenant"/>
        <label name="feature" value="TestGetTenant"/>
        <label name="severity" value="normal"/>
        <label name="thread" value="20436-MainThread"/>
        <label name="host" value="localhost"/>
        <label name="framework" value="pytest"/>
        <label name="language" value="cpython3"/>
      </labels>
      <steps>
        <step start="1542790415538" status="passed" stop="1542790415538">
          <name>设置用户登录手机号</name>
          <title>设置用户登录手机号</title>
          <attachments/>
          <steps/>
        </step>
        <step start="1542790415538" status="passed" stop="1542790416051">
          <name>获取用户租户信息</name>
          <title>获取用户租户信息</title>
          <attachments/>
          <steps/>
        </step>
        <step start="1542790416051" status="passed" stop="1542790416052">
          <name>验证结果</name>
          <title>验证结果</title>
          <attachments/>
          <steps/>
        </step>
      </steps>
    </test-case>
    <test-case start="1542790416055" status="passed" stop="1542790416428">
      <description>

        用例描述：根据用户手机号验证此手机号返回的相应租户是否正确
        </description>
      <name>.Users.motao.PycharmProjects.SqbjApiTest.test_cases.test_public_api.test_get_tenant.TestGetTenant.test_get_tenant[16811011101-jingj]</name>
      <attachments>
        <attachment source="66d17138-9001-417c-af4d-e43341013829-attachment.txt" title="Captured log setup" type="text/plain"/>
      </attachments>
      <labels>
        <label name="story" value="验证获取用户租户接口"/>
        <label name="feature" value="test_get_tenant"/>
        <label name="feature" value="TestGetTenant"/>
        <label name="severity" value="normal"/>
        <label name="thread" value="20436-MainThread"/>
        <label name="host" value="localhost"/>
        <label name="framework" value="pytest"/>
        <label name="language" value="cpython3"/>
      </labels>
      <steps>
        <step start="1542790416058" status="passed" stop="1542790416058">
          <name>设置用户登录手机号</name>
          <title>设置用户登录手机号</title>
          <attachments/>
          <steps/>
        </step>
        <step start="1542790416058" status="passed" stop="1542790416427">
          <name>获取用户租户信息</name>
          <title>获取用户租户信息</title>
          <attachments/>
          <steps/>
        </step>
        <step start="1542790416427" status="passed" stop="1542790416427">
          <name>验证结果</name>
          <title>验证结果</title>
          <attachments/>
          <steps/>
        </step>
      </steps>
    </test-case>
    <test-case start="1542790416432" status="passed" stop="1542790416438">
      <name>.Users.motao.PycharmProjects.SqbjApiTest.test_cases.test_public_api.test_login.TestLogin.test_login</name>
      <attachments>
        <attachment source="4a4fd9ca-08a2-4223-af21-adaad6c290d8-attachment.txt" title="Captured log setup" type="text/plain"/>
        <attachment source="713dcef7-eb46-4b20-b9b1-395810fb2b78-attachment.txt" title="Captured log call" type="text/plain"/>
      </attachments>
      <labels>
        <label name="severity" value="normal"/>
        <label name="thread" value="20436-MainThread"/>
        <label name="host" value="localhost"/>
        <label name="framework" value="pytest"/>
        <label name="language" value="cpython3"/>
      </labels>
      <steps/>
    </test-case>
  </test-cases>
</ns0:test-suite>
